<script src="~/Scripts/knockout.debug.js"></script>
<script src="~/Scripts/knockout.mapping.js"></script>

@{ 
    ViewBag.Title = "Historia Clínica";
}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Historia Clínica</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#menu" aria-controls="menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon">.</span>
    </button>
    <div class="collapse navbar-collapse" id="menu">
        <ul class="navbar-nav mr-auto">
            @*<li class="nav-item active">
                <a class="nav-link" href="#" data-bind="click: Consulta">Consulta <span class="sr-only">(current)</span></a>
            </li>*@
            @*<li class="nav-item">
                <a class="nav-link" href="#">Link</a>
            </li>*@
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Odontología General
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="#" data-bind="click: Consulta">Consulta</a>
                    @*<div class="dropdown-divider"></div>*@
                    <a class="dropdown-item" href="#" data-bind="click: Odontograma">Odontograma</a>
                    <a class="dropdown-item" href="#" data-bind="click: Periodoncia">Periodoncia</a>
                </div>
            </li>
            @*<li class="nav-item">
                <a class="nav-link disabled" href="#">Disabled</a>
            </li>*@
        </ul>
        <div class="my-2 my-lg-0">
            Luis Mauricio Padilla Correa
        </div>
    </div>
</nav>
<div class="row" id="contenidoHistoria">
    
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Monthly Recap Report</h5>

                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse">
                            <i class="fas fa-minus"></i>
                        </button>
                        <div class="btn-group">
                            <button type="button" class="btn btn-tool dropdown-toggle" data-toggle="dropdown">
                                <i class="fas fa-wrench"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" role="menu">
                                <a href="#" class="dropdown-item">Action</a>
                                <a href="#" class="dropdown-item">Another action</a>
                                <a href="#" class="dropdown-item">Something else here</a>
                                <a class="dropdown-divider"></a>
                                <a href="#" class="dropdown-item">Separated link</a>
                            </div>
                        </div>
                        <button type="button" class="btn btn-tool" data-card-widget="remove">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <!-- /.card-header -->
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <p class="text-center">
                                <strong>Sales: 1 Jan, 2014 - 30 Jul, 2014</strong>
                            </p>

                            <div class="chart">
                                <div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
                                <!-- Sales Chart Canvas -->
                                <canvas id="salesChart" height="180" style="height: 180px; display: block; width: 836px;" width="836" class="chartjs-render-monitor"></canvas>
                            </div>
                            <!-- /.chart-responsive -->
                        </div>
                        <!-- /.col -->
                        <div class="col-md-4">
                            <p class="text-center">
                                <strong>Goal Completion</strong>
                            </p>

                            <div class="progress-group">
                                Add Products to Cart
                                <span class="float-right"><b>160</b>/200</span>
                                <div class="progress progress-sm">
                                    <div class="progress-bar bg-primary" style="width: 80%"></div>
                                </div>
                            </div>
                            <!-- /.progress-group -->

                            <div class="progress-group">
                                Complete Purchase
                                <span class="float-right"><b>310</b>/400</span>
                                <div class="progress progress-sm">
                                    <div class="progress-bar bg-danger" style="width: 75%"></div>
                                </div>
                            </div>

                            <!-- /.progress-group -->
                            <div class="progress-group">
                                <span class="progress-text">Visit Premium Page</span>
                                <span class="float-right"><b>480</b>/800</span>
                                <div class="progress progress-sm">
                                    <div class="progress-bar bg-success" style="width: 60%"></div>
                                </div>
                            </div>

                            <!-- /.progress-group -->
                            <div class="progress-group">
                                Send Inquiries
                                <span class="float-right"><b>250</b>/500</span>
                                <div class="progress progress-sm">
                                    <div class="progress-bar bg-warning" style="width: 50%"></div>
                                </div>
                            </div>
                            <!-- /.progress-group -->
                        </div>
                        <!-- /.col -->
                    </div>
                    <!-- /.row -->
                </div>
                <!-- ./card-body -->
                <div class="card-footer">
                    <div class="row">
                        <div class="col-sm-3 col-6">
                            <div class="description-block border-right">
                                <span class="description-percentage text-success"><i class="fas fa-caret-up"></i> 17%</span>
                                <h5 class="description-header">$35,210.43</h5>
                                <span class="description-text">TOTAL REVENUE</span>
                            </div>
                            <!-- /.description-block -->
                        </div>
                        <!-- /.col -->
                        <div class="col-sm-3 col-6">
                            <div class="description-block border-right">
                                <span class="description-percentage text-warning"><i class="fas fa-caret-left"></i> 0%</span>
                                <h5 class="description-header">$10,390.90</h5>
                                <span class="description-text">TOTAL COST</span>
                            </div>
                            <!-- /.description-block -->
                        </div>
                        <!-- /.col -->
                        <div class="col-sm-3 col-6">
                            <div class="description-block border-right">
                                <span class="description-percentage text-success"><i class="fas fa-caret-up"></i> 20%</span>
                                <h5 class="description-header">$24,813.53</h5>
                                <span class="description-text">TOTAL PROFIT</span>
                            </div>
                            <!-- /.description-block -->
                        </div>
                        <!-- /.col -->
                        <div class="col-sm-3 col-6">
                            <div class="description-block">
                                <span class="description-percentage text-danger"><i class="fas fa-caret-down"></i> 18%</span>
                                <h5 class="description-header">1200</h5>
                                <span class="description-text">GOAL COMPLETIONS</span>
                            </div>
                            <!-- /.description-block -->
                        </div>
                    </div>
                    <!-- /.row -->
                </div>
                <!-- /.card-footer -->
            </div>
            <!-- /.card -->
        </div>
        <!-- /.col -->
    
</div>


<script>
    let PersonaID = '@ViewBag.id';
    var vmh = {};
    $(document).ready(function () {

        function KnockoutHistoria(data) {
            vmh = ko.mapping.fromJS(data);
            vmh.ShowModal = ko.observable(false);

            vmh.Consulta = function () {
                $("#contenidoHistoria").load("/Consultas/Consultas");
                $("#contenidoHistoria").show();
            };

            vmh.Odontograma = function () {
                $("#contenidoHistoria").load("/Odontograma/Odontograma");
                $("#contenidoHistoria").show();
            };

            vmh.Periodoncia = function () {
                $("#contenidoHistoria").load("/Periodoncia/Periodoncia");
                $("#contenidoHistoria").show();
            };

            ko.applyBindings(vmh, $("#contenidoHistoria")[0]);
            ko.applyBindings(vmh, $("#menu")[0]);
        }

        $.ajax({
            type: "GET",
            contentType: "application/json; charset=utf-8",
            url: "/Historia/GetData",
            success: KnockoutHistoria
        });
    })

    function wait(name, callback) {
        var interval = 10; // ms
        window.setTimeout(function () {
            if (window[name]) {
                callback(window[name]);
            } else {
                window.setTimeout(arguments.callee, interval);
            }
        }, interval);
    }

    function isEmpty(obj) {
        if (obj == null) return true;
        if (obj.length > 0) return false;
        if (obj.length === 0) return true;
        for (var key in obj) {
            if (hasOwnProperty.call(obj, key)) return false;
        }
        return true;
    }

    function forEach(array, action) {
        for (var i = 0; i < array.length; i++)
            action(array[i]);
    }
</script>